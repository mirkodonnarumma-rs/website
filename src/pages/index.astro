---
import Header from '../components/header.astro';
import Footer from '../components/footer.astro';
import '../styles/global.css';

const lang = 'it';
---
<html lang={lang === 'it' ? 'it' : 'en'}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mirko Donnarumma</title>
    <meta name="description" content="Portfolio di Mirko Donnarumma — Software Engineer Rust & Embedded." />
    <link rel="alternate" href="https://mirkodonnarumma.it/" hreflang="it" />
    <link rel="alternate" href="https://mirkodonnarumma.it/en/" hreflang="en" />
    <link rel="canonical" href="https://mirkodonnarumma.it/" />
  </head>

  <body class="font-sans text-text bg-bg">
    <Header lang={lang} />

    <!-- Main: single page sections -->
    <main id="main" class="snap-y snap-mandatory">
      <!-- Hero (Landing + About compact) -->
      <section id="hero" class="snap-start min-h-screen flex items-center">
        <div class="container grid grid-cols-1 md:grid-cols-12 gap-8 items-center">
          <!-- Left: Intro + CTA -->
          <div class="md:col-span-7">
            <pre class="ascii mb-4" aria-hidden="true">
 _____ ______   ___  ________  ___  __    ________          ________  ________  ________   ________   ________  ________  ___  ___  _____ ______   _____ ______   ________     
|\   _ \  _   \|\  \|\   __  \|\  \|\  \ |\   __  \        |\   ___ \|\   __  \|\   ___  \|\   ___  \|\   __  \|\   __  \|\  \|\  \|\   _ \  _   \|\   _ \  _   \|\   __  \    
\ \  \\\__\ \  \ \  \ \  \|\  \ \  \/  /|\ \  \|\  \       \ \  \_|\ \ \  \|\  \ \  \\ \  \ \  \\ \  \ \  \|\  \ \  \|\  \ \  \\\  \ \  \\\__\ \  \ \  \\\__\ \  \ \  \|\  \   
 \ \  \\|__| \  \ \  \ \   _  _\ \   ___  \ \  \\\  \       \ \  \ \\ \ \  \\\  \ \  \\ \  \ \  \\ \  \ \   __  \ \   _  _\ \  \\\  \ \  \\|__| \  \ \  \\|__| \  \ \   __  \  
  \ \  \    \ \  \ \  \ \  \\  \\ \  \\ \  \ \  \\\  \       \ \  \_\\ \ \  \\\  \ \  \\ \  \ \  \\ \  \ \  \ \  \ \  \\  \\ \  \\\  \ \  \    \ \  \ \  \    \ \  \ \  \ \  \ 
   \ \__\    \ \__\ \__\ \__\\ _\\ \__\\ \__\ \_______\       \ \_______\ \_______\ \__\\ \__\ \__\\ \__\ \__\ \__\ \__\\ _\\ \_______\ \__\    \ \__\ \__\    \ \__\ \__\ \__\
    \|__|     \|__|\|__|\|__|\|__|\|__| \|__|\|_______|        \|_______|\|_______|\|__| \|__|\|__| \|__|\|__|\|__|\|__|\|__|\|_______|\|__|     \|__|\|__|     \|__|\|__|\|__|

            </pre>
            <p class="hero-sub mt-4">Software Engineer specializzato in Rust per sistemi embedded. Controllo DALI/PLM, integrazione hardware e automazione.</p>

            <div class="mt-6 flex flex-wrap gap-4">
              <a href="#contact" class="btn-primary">Contattami</a>
              <a href="/cv.pdf" class="btn-ghost">Scarica CV</a>
            </div>

            <ul class="mt-6 list-disc ml-5 text-muted">
              <li>Firmware Rust per AM335x</li>
              <li>Integrazione DALI via PLM</li>
              <li>Telemetria (MQTT) e backend</li>
            </ul>
          </div>

          <!-- Right: About / Skills -->
          <aside class="md:col-span-5">
            <div class="card reveal">
              <h2 class="text-2xl font-bold">Chi sono</h2>
              <p class="mt-3 text-muted">Lavoro su progetti embedded usando Rust. Ho esperienza con Yocto, integrazione DALI e comunicazione PLM. Prediligo codice sicuro e performance deterministica.</p>

              <div class="mt-6 grid grid-cols-1 gap-4">
                <div>
                  <h4 class="font-semibold">Competenze</h4>
                  <ul class="mt-2 list-disc ml-5 text-muted">
                    <li>Rust & Embedded</li>
                    <li>Yocto / Buildroot</li>
                    <li>DALI / PLM integrations</li>
                  </ul>
                </div>

                <div>
                  <h4 class="font-semibold">Strumenti</h4>
                  <p class="mt-2 text-muted">Git, CI, Debug su hardware, Serial/USB tools, Docker</p>
                </div>
              </div>
            </div>
          </aside>
        </div>
      </section>

      <!-- Latest project -->
      <section id="hero" class="snap-start min-h-screen flex items-center">
        <div class="container py-20">
          <h2 class="text-3xl font-bold">Ultimo progetto</h2>
          <p class="mt-2 text-muted">Descrizione sintetica — i dettagli vengono caricati quando la sezione entra in vista.</p>

          <div id="project-content" class="mt-6 reveal border rounded p-6 bg-surface">
            <div class="project-summary">
              <h3 class="font-semibold">Sistema di controllo illuminazione</h3>
              <p class="mt-2 text-muted">Architettura embedded in Rust, integrazione DALI/PLM, invio telemetria su server centrale.</p>
            </div>

            <div id="project-details" class="mt-4 overflow-hidden max-h-0 opacity-0 transition-all duration-500">
              <p class="text-muted">Caricamento dettagli...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Contact -->
      <section id="contact" class="snap-start min-h-screen flex items-center">
        <div class="container py-20">
          <h2 class="text-3xl font-bold">Contattami</h2>
          <p class="mt-2 text-muted">Mandami un messaggio e ti rispondo al più presto.</p>

          <form name="contact" method="POST" data-netlify="true" class="mt-6 space-y-4">
            <input type="hidden" name="form-name" value="contact" />
            <label class="block">
              <span>Nome</span>
              <input name="name" required class="input" />
            </label>

            <label class="block">
              <span>Email</span>
              <input name="email" type="email" required class="input" />
            </label>

            <label class="block">
              <span>Messaggio</span>
              <textarea name="message" rows="6" required class="input"></textarea>
            </label>

            <button type="submit" class="btn-primary">Invia</button>
          </form>
        </div>
      </section>

      <div class="py-12"></div> <!-- bottom spacing -->
    </main>

    <Footer lang={lang} />

    <!-- UI script (reveal, nav highlight, lazy load) -->
    <script type="module" src="/src/scripts/ui.js"></script>
  </body>
</html>
