---
const { lang = "it", copy = {} } = Astro.props;
const otherLang = lang === "it" ? "en" : "it";
const baseTarget = otherLang === "en" ? "/en/" : "/";
---

<header>
  <nav class="container justify-between">
    <pre
      class="ascii mb-4"
      aria-hidden="true">
m    m   "           #
##  ## mmm   m mm  #   m   mmm
# ## #   #   #"  " # m"   #" "#
# "" #   #   #     #"#    #   #
#    # mm#mm #     #  "m  "#m#"
</pre>
    <pre
      class="ascii mb-4"
      aria-hidden="true">
mmmm
#   "m  mmm   m mm   m mm    mmm    m mm  m   m  mmmmm  mmmmm   mmm
#    # #" "#  #"  #  #"  #  "   #   #"  " #   #  # # #  # # #  "   #
#    # #   #  #   #  #   #  m"""#   #     #   #  # # #  # # #  m"""#
#mmm"  "#m#"  #   #  #   #  "mm"#   #     "mm"#  # # #  # # #  "mm"#
</pre>
    <button id="lang-switch">
      {lang === "it" ? "EN" : "IT"}
    </button>
  </nav>
  <script>
    (function () {
      const btn = document.getElementById("lang-switch");
      if (!btn) return;
      btn.addEventListener("click", function () {
        const hash = location.hash || "";
        const target = "`${baseTarget}`"; // placeholder verr√† rimpiazzato nel build
        const other = location.pathname.startsWith("/en") ? "/" : "/en/";
        const newUrl = other + hash;
        location.href = newUrl;
      });
    })();
  </script>
</header>
